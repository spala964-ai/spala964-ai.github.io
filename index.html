<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CompTIA A+ Core 2 Quiz</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    /* Your existing styles remain unchanged           */
    /* ... (keeping your beautiful original styling) ... */
  </style>
</head>
<body class="h-full">
<div id="app" class="w-full h-full"></div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  IMPORTANT: Update pool sizes here
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const MC_POOL_SIZE = 300;
const LAB_POOL_SIZE = 100;
const SCENARIO_POOL_SIZE = 100;

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  Your question arrays â€” REPLACE/COMPLETE these with real data!
//  (right now these are just examples â€” you need many more)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const mcQuestions = [
  // You should have ~300 real questions here
  { q: "Which Windows edition includes BitLocker encryption?", options: ["Home", "Pro", "Starter", "Basic"], answer: 1, category: "Windows" },
  { q: "What is the minimum RAM requirement for Windows 10 64-bit?", options: ["1 GB", "2 GB", "4 GB", "8 GB"], answer: 1, category: "Windows" },
  // ... add 298 more multiple choice questions ...
  { q: "Last sample MC question", options: ["A","B","C","D"], answer: 2, category: "Security" }
].map(enrichQuestion);

const labQuestions = [
  // You should have ~100 real lab/command questions
  { q: "Lab: Test connectivity to google.com", task: "Enter the command...", answer: "ping www.google.com", category: "Command Line" },
  { q: "Lab: Show IP configuration", task: "Enter command to display IP config", answer: "ipconfig", category: "Command Line" },
  // ... add ~98 more ...
].map(enrichQuestion);

const scenarioQuestions = [
  // You should have ~100 real scenario questions
  { q: "Scenario: Computer won't turn on, power LED is off. First step?", 
    options: ["Replace motherboard", "Check power cable", "Replace RAM", "Reinstall Windows"], 
    answer: 1, category: "Troubleshooting" },
  // ... add ~99 more ...
].map(enrichQuestion);

// Your existing enrichQuestion function
function enrichQuestion(q) {
  const core1Categories = ['Hardware', 'Networking'];
  const core2Categories = ['Windows', 'Security', 'Mobile', 'Troubleshooting', 'Operating Systems', 'Scripting', 'Cloud', 'Remote Access', 'Documentation', 'Professionalism', 'Printers', 'Software', 'Command Line'];
  
  let exam = 'both';
  if (core1Categories.includes(q.category)) exam = 'core1';
  else if (core2Categories.includes(q.category)) exam = 'core2';
  
  const hash = q.q.length % 4 + 1;
  const difficulty = hash;
  
  return { ...q, difficulty, exam };
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  Rest of your original code (variables, dataHandler, etc.)
//  Only showing the changed parts below
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function renderSetupScreen() {
  // ... your existing code ...

  app.innerHTML = `
    <div class="quiz-container fade-in" style="...">
      <div class="surface-card" style="...">
        <h1>...</h1>
        <p class="subtitle">...</p>

        ${hasSavedProgress ? `...` : ''}

        <!-- Difficulty & Exam selectors remain the same -->

        <div style="margin-bottom: 24px;">
          <label style="...">ğŸ“ Multiple Choice (1 pt each) â€” max ${MC_POOL_SIZE}</label>
          <input type="number" id="mcCount" value="20" min="0" max="${MC_POOL_SIZE}" style="...">
        </div>
        
        <div style="margin-bottom: 24px;">
          <label style="...">ğŸ”¬ Performance-Based Labs (2 pts each) â€” max ${LAB_POOL_SIZE}</label>
          <input type="number" id="labCount" value="5" min="0" max="${LAB_POOL_SIZE}" style="...">
        </div>
        
        <div style="margin-bottom: 32px;">
          <label style="...">ğŸ’¼ Scenarios / PBQs (2 pts each) â€” max ${SCENARIO_POOL_SIZE}</label>
          <input type="number" id="scenarioCount" value="5" min="0" max="${SCENARIO_POOL_SIZE}" style="...">
        </div>

        <button id="startQuizBtn" class="primary-btn" ...>
          ${config.start_button || defaultConfig.start_button}
        </button>
      </div>
    </div>
  `;

  // ... event listeners remain the same ...
}

// Updated validation in startQuiz()
function startQuiz() {
  const mcCount       = parseInt(document.getElementById('mcCount').value)       || 0;
  const labCount      = parseInt(document.getElementById('labCount').value)      || 0;
  const scenarioCount = parseInt(document.getElementById('scenarioCount').value) || 0;

  const difficulty = document.getElementById('difficulty').value;
  const examType   = document.getElementById('examType').value;

  // â”€â”€â”€ Validation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  if (mcCount > MC_POOL_SIZE) {
    showInlineMessage(`Maximum ${MC_POOL_SIZE} multiple choice questions available.`);
    return;
  }
  if (labCount > LAB_POOL_SIZE) {
    showInlineMessage(`Maximum ${LAB_POOL_SIZE} lab questions available.`);
    return;
  }
  if (scenarioCount > SCENARIO_POOL_SIZE) {
    showInlineMessage(`Maximum ${SCENARIO_POOL_SIZE} scenario questions available.`);
    return;
  }

  if (mcCount + labCount + scenarioCount === 0) {
    showInlineMessage("Please select at least one question.");
    return;
  }

  // Your existing filtering + shuffling logic...
  let filteredMC = mcQuestions.filter(q => {
    const diffMatch = difficulty === 'mixed' || q.difficulty == difficulty;
    const examMatch = examType === 'both' || q.exam === examType || q.exam === 'both';
    return diffMatch && examMatch;
  });

  let filteredLabs = labQuestions.filter(/* same logic */);
  let filteredScenarios = scenarioQuestions.filter(/* same logic */);

  const takeMC = Math.min(mcCount, filteredMC.length);
  const takeLab = Math.min(labCount, filteredLabs.length);
  const takeScenario = Math.min(scenarioCount, filteredScenarios.length);

  const shuffledMC       = [...filteredMC].sort(() => Math.random() - 0.5).slice(0, takeMC);
  const shuffledLabs     = [...filteredLabs].sort(() => Math.random() - 0.5).slice(0, takeLab);
  const shuffledScenarios = [...filteredScenarios].sort(() => Math.random() - 0.5).slice(0, takeScenario);

  currentQuiz = [...shuffledMC, ...shuffledLabs, ...shuffledScenarios]
    .sort(() => Math.random() - 0.5); // final shuffle

  if (currentQuiz.length === 0) {
    showInlineMessage("No questions match the selected difficulty & exam combination.");
    return;
  }

  // Reset & start
  currentIndex = 0;
  score = 0;
  userAnswers = [];
  quizStarted = true;
  savedProgress = null;

  renderQuestion();
}

// The rest of your code (renderQuestion, submitAnswer, results, etc.) remains unchanged
// ...

init();
</script>
</body>
</html>
